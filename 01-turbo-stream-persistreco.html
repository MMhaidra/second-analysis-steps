<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>LHCb Starterkit: Second analysis steps</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css" />
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
     ga('create', 'UA-63818884-1', 'auto');
     ga('send', 'pageview');
    </script>
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="https://lhcb.github.io/second-analysis-steps/">
          <img src="img/starterkit.png" height="200" alt="LHCb Starterkit">
        </a>
      </div>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
          <h1 class="title">Second analysis steps</h1>
          <h2 class="subtitle">The Turbo stream and PersistReco</h2>
<div id="learning-objectives" class="objectives panel panel-warning">
<div class="panel-heading">
<h2 id="learning-objectives" class="objectives panel panel-warning"><span class="glyphicon glyphicon-certificate"></span>Learning Objectives</h2>
</div>
<div class="panel-body">
<ul>
<li>Recap what the Turbo stream is and why it exists</li>
<li>Learn about the PersistReco feature in the Turbo stream</li>
<li>Build a decay using objects from PersistReco</li>
</ul>
</div>
</div>
<p>The Turbo stream was <a href="https://lhcb.github.io/first-analysis-steps/21-run-2-data-flow.html">introduced in the first workshop</a>, in the context of changes to the LHCb data flow in Run 2. To summarise, the Turbo stream contains the candidates built and selected in HLT2, and the data is not reprocessed by Brunel. This saves time, but also disk space as <em>only</em> the objects created by the passing selection are saved, other tracks and objects in the event are discarded. This means that if the output of a trigger line selecting <span class="math inline">\(J/\psi \to \mu^{-}\mu^{+}\)</span> goes to the Turbo, only the two muon objects and the <span class="math inline">\(J/\psi\)</span> object will be available offline.</p>
<p>The downside of saving only the objects comprising the selected decay is that one can only do very little else with the data beyond what was done in HLT2. It is also somewhat wasteful to throw away of the other objects in the event, as HLT2 spends time reconstructing time.</p>
<p>Trigger lines whose selected candidates should go to the Turbo stream are sometimes called ‘Turbo lines’, and for 2016 data-taking these lines have an additional flag that can be activated called <em>PersistReco</em>. When a Turbo line has PersistReco enabled, all of the reconstructed objects are saved to the Turbo stream, in addition to the objects used in the passing selection. These objects are then made available for offline analysis, after the Tesla application is run on the Turbo stream, in such a way that the HLT2 objects can be used in DaVinci just like the output of Brunel.</p>
<p>In this, we'll see how you can build decays using basic particles like kaons and pions, and we'll do it using particles from trigger lines with PersistReco enabled.</p>
        </div>
      </div>
      <div class="footer">
        <a class="label swc-blue-bg" href="https://lhcb.github.io/lhcb/starterkit">Starterkit</a>
        <a class="label swc-blue-bg" href="https://github.com/lhcb/second-analysis-steps">Source</a>
        <a class="label swc-blue-bg" href="mailto:lhcb-starterkit@cern.ch">Contact</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/contrib/auto-render.min.js"></script>
    <script>
      // Go KaTeX go!
      renderMathInElement(document.body);
    </script>
  </body>
</html>
